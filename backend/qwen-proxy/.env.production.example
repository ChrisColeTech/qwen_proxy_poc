# Production Configuration for Qwen Proxy Backend
# Copy this file to .env.production and fill in your actual values

# ====================================
# Server Configuration
# ====================================
NODE_ENV=production
PORT=3000

# ====================================
# Qwen API Authentication (REQUIRED)
# ====================================
# IMPORTANT: These credentials are REQUIRED for the proxy to work
# Get these from your browser when logged into chat.qwen.ai

# The bx-umidtoken header value
QWEN_TOKEN=your_production_token_here

# The complete Cookie header value
QWEN_COOKIES=your_production_cookies_here

# ====================================
# Security Settings
# ====================================
# Set to true if running behind a reverse proxy (nginx, Caddy, etc.)
TRUST_PROXY=true

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=https://your-domain.com
CORS_CREDENTIALS=true

# ====================================
# Logging Configuration
# ====================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Pretty print logs (false for production, true for development)
LOG_PRETTY=false

# Log file paths (optional, logs to console if not set)
# LOG_FILE_ERROR=/var/log/qwen-proxy/error.log
# LOG_FILE_COMBINED=/var/log/qwen-proxy/combined.log

# ====================================
# Session Management
# ====================================
# Session timeout in milliseconds (default: 30 minutes)
SESSION_TIMEOUT=1800000

# Session cleanup interval in milliseconds (default: 10 minutes)
SESSION_CLEANUP_INTERVAL=600000

# ====================================
# Retry Configuration
# ====================================
# Maximum number of retry attempts for failed API calls
RETRY_MAX_ATTEMPTS=3

# Initial delay in milliseconds before first retry
RETRY_INITIAL_DELAY=1000

# Maximum delay in milliseconds between retries
RETRY_MAX_DELAY=10000

# Backoff multiplier for exponential backoff
RETRY_BACKOFF_MULTIPLIER=2

# ====================================
# Cache Configuration
# ====================================
# Models cache duration in milliseconds (default: 1 hour)
MODELS_CACHE_DURATION=3600000

# ====================================
# Rate Limiting (Optional)
# ====================================
# Enable rate limiting
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_WINDOW_MS=60000
# RATE_LIMIT_MAX_REQUESTS=100

# ====================================
# Performance Tuning
# ====================================
# Request timeout in milliseconds
REQUEST_TIMEOUT=30000

# Keep-alive timeout in milliseconds
KEEP_ALIVE_TIMEOUT=65000

# ====================================
# Monitoring
# ====================================
# Enable Prometheus metrics endpoint
METRICS_ENABLED=true

# Enable health check endpoint
HEALTH_CHECK_ENABLED=true
