# Frontend V3 Code Documentation - Phases 8-10

This document provides complete source code for all UI components, feature components, and layout components from the Frontend V3 Rewrite Implementation Plan.

## Table of Contents

- [Phase 8: UI Components - Base](#phase-8-ui-components---base)
  - [Phase 8.1: shadcn/ui Components](#phase-81-shadcnui-components)
  - [Phase 8.2: Custom UI Components](#phase-82-custom-ui-components)
- [Phase 9: UI Components - Features](#phase-9-ui-components---features)
  - [Phase 9.1: Home Feature Components](#phase-91-home-feature-components)
  - [Phase 9.2: Chat Feature Components](#phase-92-chat-feature-components)
  - [Phase 9.3: Providers & Models Components](#phase-93-providers--models-components)
  - [Phase 9.4: Credentials Components](#phase-94-credentials-components)
  - [Phase 9.5: Quick Guide Components](#phase-95-quick-guide-components)
- [Phase 10: Layout Components](#phase-10-layout-components)
  - [Phase 10.1: Core Layout Components](#phase-101-core-layout-components)

---

## Phase 8: UI Components - Base

### Phase 8.1: shadcn/ui Components

**Overview**: These components are auto-generated by the shadcn CLI and provide the foundation for all UI elements. They are built on top of Radix UI primitives and styled with Tailwind CSS.

**Installation Command**:
```bash
cd frontend
npx shadcn@latest init -d
npx shadcn@latest add button input textarea label card popover command dialog badge alert tabs select switch toggle toggle-group table dropdown-menu toast
```

#### button.tsx

**File**: `frontend/src/components/ui/button.tsx`

**Purpose**: Flexible button component with multiple variants and sizes.

**Note**: Auto-generated by shadcn CLI.

```typescript
// frontend/src/components/ui/button.tsx
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }
```

#### card.tsx

**File**: `frontend/src/components/ui/card.tsx`

**Purpose**: Card container component with header, content, and footer sections.

**Note**: Auto-generated by shadcn CLI.

```typescript
// frontend/src/components/ui/card.tsx
import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-xl border bg-card text-card-foreground shadow",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("font-semibold leading-none tracking-tight", className)}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }
```

#### badge.tsx

**File**: `frontend/src/components/ui/badge.tsx`

**Purpose**: Badge component for displaying status labels and tags.

**Note**: Auto-generated by shadcn CLI.

```typescript
// frontend/src/components/ui/badge.tsx
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  )
}

export { Badge, badgeVariants }
```

#### tabs.tsx

**File**: `frontend/src/components/ui/tabs.tsx`

**Purpose**: Tab navigation component built on Radix UI.

**Note**: Auto-generated by shadcn CLI.

```typescript
// frontend/src/components/ui/tabs.tsx
import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

const Tabs = TabsPrimitive.Root

const TabsList = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.List
    ref={ref}
    className={cn(
      "inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",
      className
    )}
    {...props}
  />
))
TabsList.displayName = TabsPrimitive.List.displayName

const TabsTrigger = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Trigger
    ref={ref}
    className={cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",
      className
    )}
    {...props}
  />
))
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName

const TabsContent = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Content
    ref={ref}
    className={cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className
    )}
    {...props}
  />
))
TabsContent.displayName = TabsPrimitive.Content.displayName

export { Tabs, TabsList, TabsTrigger, TabsContent }
```

**Note**: The remaining shadcn components (input, textarea, label, popover, command, dialog, alert, select, switch, toggle, toggle-group, table, dropdown-menu, toast) follow the same pattern. They are all auto-generated by the shadcn CLI and can be added with:

```bash
npx shadcn@latest add <component-name>
```

Each component is a wrapper around Radix UI primitives with Tailwind CSS styling and proper TypeScript types.

---

### Phase 8.2: Custom UI Components

These are custom-built components that extend the shadcn component library with application-specific functionality.

#### toaster.tsx

**File**: `frontend/src/components/ui/toaster.tsx`

**Purpose**: Container component for toast notifications that adapts position based on sidebar placement.

```typescript
// frontend/src/components/ui/toaster.tsx
import { useToast } from "@/hooks/useToast"
import { useUIStore } from "@/stores/useUIStore"
import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from "@/components/ui/toast"

export function Toaster() {
  const { toasts } = useToast()
  const sidebarPosition = useUIStore((state) => state.uiState.sidebarPosition)

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{String(description)}</ToastDescription>
              )}
            </div>
            {action && <div>{action}</div>}
            <ToastClose />
          </Toast>
        )
      })}
      <ToastViewport
        className={
          sidebarPosition === 'right'
            ? 'sm:bottom-6 sm:right-16'
            : 'sm:bottom-6 sm:right-0'
        }
      />
    </ToastProvider>
  )
}
```

#### status-indicator.tsx

**File**: `frontend/src/components/ui/status-indicator.tsx`

**Purpose**: Animated status dot with optional pulse effect for indicating system states.

```typescript
// frontend/src/components/ui/status-indicator.tsx
import { cn } from '@/lib/utils';

export type StatusType = 'success' | 'warning' | 'error' | 'inactive' | 'running' | 'stopped' | 'invalid' | 'none' | 'authenticated';

interface StatusIndicatorProps {
  status: StatusType;
  pulse?: boolean;
  className?: string;
}

export function StatusIndicator({ status, pulse = true, className }: StatusIndicatorProps) {
  const colorMap: Record<StatusType, string> = {
    success: 'bg-green-500',
    running: 'bg-green-500',
    authenticated: 'bg-green-500',
    warning: 'bg-yellow-500',
    error: 'bg-red-500',
    invalid: 'bg-red-500',
    inactive: 'bg-gray-400',
    stopped: 'bg-gray-400',
    none: 'bg-gray-400',
  };

  const color = colorMap[status];

  return (
    <span className={cn('relative flex h-3 w-3', className)}>
      {pulse && (
        <span
          className={cn(
            'animate-ping absolute inline-flex h-full w-full rounded-full opacity-75',
            color
          )}
        ></span>
      )}
      <span className={cn('relative inline-flex rounded-full h-3 w-3', color)}></span>
    </span>
  );
}
```

#### status-badge.tsx

**File**: `frontend/src/components/ui/status-badge.tsx`

**Purpose**: Badge component specifically for status labels with semantic color mapping.

```typescript
// frontend/src/components/ui/status-badge.tsx
import { Badge } from './badge';
import type { ReactNode } from 'react';

export type Status = 'active' | 'inactive' | 'expired' | 'running' | 'stopped' | 'none' | 'authenticated' | 'invalid';

interface StatusBadgeProps {
  status: Status;
  children?: ReactNode;
}

export function StatusBadge({ status, children }: StatusBadgeProps) {
  const variantMap: Record<Status, 'default' | 'secondary' | 'destructive'> = {
    active: 'default',
    running: 'default',
    authenticated: 'default',
    inactive: 'secondary',
    stopped: 'secondary',
    none: 'secondary',
    expired: 'destructive',
    invalid: 'destructive',
  };

  const variant = variantMap[status];
  const text = children || status.charAt(0).toUpperCase() + status.slice(1);

  return <Badge variant={variant}>{text}</Badge>;
}
```

#### environment-badge.tsx

**File**: `frontend/src/components/ui/environment-badge.tsx`

**Purpose**: Platform detection badge showing Desktop (Electron) or Browser mode with animated indicator.

```typescript
// frontend/src/components/ui/environment-badge.tsx
import { Badge } from './badge';

export function EnvironmentBadge() {
  const isElectron = typeof window !== 'undefined' && window.electronAPI !== undefined;

  return (
    <Badge variant={isElectron ? 'default' : 'secondary'} className="gap-1">
      <span className="relative flex h-2 w-2">
        <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-current opacity-75"></span>
        <span className="relative inline-flex rounded-full h-2 w-2 bg-current"></span>
      </span>
      {isElectron ? 'Desktop' : 'Browser'}
    </Badge>
  );
}
```

#### action-list.tsx

**File**: `frontend/src/components/ui/action-list.tsx`

**Purpose**: Reusable list component for displaying items with icons, titles, descriptions, and action buttons.

```typescript
// frontend/src/components/ui/action-list.tsx
import type { LucideIcon } from 'lucide-react';
import type { ReactNode } from 'react';

interface ActionListItem {
  icon?: ReactNode;
  title: string;
  description: string;
  actions?: ReactNode;
  onClick?: () => void;
  disabled?: boolean;
  hidden?: boolean;
}

interface ActionListProps {
  title?: string;
  icon?: LucideIcon;
  items: ActionListItem[];
}

export function ActionList({ title, icon: Icon, items }: ActionListProps) {
  const visibleItems = items.filter(item => !item.hidden);

  return (
    <div className="demo-container" style={{ display: 'flex', flexDirection: 'column', height: '100%', minHeight: 0 }}>
      {title && (
        <div className="demo-header" style={{ flexShrink: 0 }}>
          <div className="demo-label">
            {Icon && <Icon className="icon-primary" />}
            <span className="demo-label-text">{title}</span>
          </div>
        </div>
      )}

      <div className="provider-switch-list" style={{ flex: 1, overflowY: 'auto', minHeight: 0 }}>
        {visibleItems.map((item, index) => (
          <div
            key={index}
            className="provider-switch-item"
            onClick={item.disabled ? undefined : item.onClick}
            style={{ cursor: item.disabled ? 'not-allowed' : item.onClick ? 'pointer' : 'default' }}
          >
            <div className="provider-switch-info">
              {item.icon}
              <div className="provider-switch-details">
                <div className="provider-switch-name">{item.title}</div>
                <div className="provider-switch-type">{item.description}</div>
              </div>
            </div>
            {item.actions && (
              <div className="provider-switch-actions">
                {item.actions}
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  );
}
```

#### content-card.tsx

**File**: `frontend/src/components/ui/content-card.tsx`

**Purpose**: Card wrapper with consistent header styling for content sections.

```typescript
// frontend/src/components/ui/content-card.tsx
import type { LucideIcon } from 'lucide-react';
import type { ReactNode } from 'react';

interface ContentCardProps {
  icon?: LucideIcon;
  title: string;
  actions?: ReactNode;
  children: ReactNode;
}

export function ContentCard({ icon: Icon, title, actions, children }: ContentCardProps) {
  return (
    <div className="demo-container flex-1 flex flex-col overflow-hidden">
      <div className="demo-header">
        <div className="demo-label">
          {Icon && <Icon className="icon-primary" />}
          <span className="demo-label-text">{title}</span>
        </div>
        {actions && <div>{actions}</div>}
      </div>
      <div className="flex-1 overflow-auto">
        {children}
      </div>
    </div>
  );
}
```

#### tab-card.tsx

**File**: `frontend/src/components/ui/tab-card.tsx`

**Purpose**: Card component with integrated tabs and optional ContentCard wrapping for tab content.

```typescript
// frontend/src/components/ui/tab-card.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { ContentCard } from '@/components/ui/content-card';
import type { LucideIcon } from 'lucide-react';
import type { ReactNode } from 'react';

interface Tab {
  value: string;
  label: string;
  content: ReactNode;
  description?: string;
  hidden?: boolean;
  contentCardTitle?: string;
  contentCardIcon?: LucideIcon;
  contentCardActions?: ReactNode;
}

interface TabCardProps {
  title: string;
  icon: LucideIcon;
  tabs: Tab[];
  defaultTab?: string;
}

export function TabCard({ title, icon: Icon, tabs, defaultTab }: TabCardProps) {
  const visibleTabs = tabs.filter(tab => !tab.hidden);

  // Calculate grid columns based on number of visible tabs
  const getGridCols = () => {
    const count = visibleTabs.length;
    if (count === 1) return 'grid-cols-1';
    if (count === 2) return 'grid-cols-2';
    if (count === 3) return 'grid-cols-3';
    return 'grid-cols-4';
  };

  return (
    <Card className="page-card">
      <CardHeader>
        <CardTitle className="card-title-with-icon">
          <Icon className="icon-sm" />
          {title}
        </CardTitle>
      </CardHeader>
      <CardContent className="page-card-content">
        <Tabs defaultValue={defaultTab || visibleTabs[0]?.value} className="tab-container">
          <TabsList className={`grid w-full ${getGridCols()}`}>
            {visibleTabs.map((tab) => (
              <TabsTrigger key={tab.value} value={tab.value}>
                {tab.label}
              </TabsTrigger>
            ))}
          </TabsList>

          {visibleTabs.map((tab) => (
            <TabsContent key={tab.value} value={tab.value} className="tab-content">
              <div className="flex flex-col h-full gap-4">
                {tab.description && (
                  <p className="step-description flex-shrink-0">{tab.description}</p>
                )}
                <div className="flex-1 min-h-0 flex flex-col">
                  {tab.contentCardTitle ? (
                    <ContentCard
                      icon={tab.contentCardIcon}
                      title={tab.contentCardTitle}
                      actions={tab.contentCardActions}
                    >
                      {tab.content}
                    </ContentCard>
                  ) : (
                    tab.content
                  )}
                </div>
              </div>
            </TabsContent>
          ))}
        </Tabs>
      </CardContent>
    </Card>
  );
}
```

---

## Phase 9: UI Components - Features

Feature components encapsulate specific functionality and compose base UI components. They follow the Single Responsibility Principle (SRP) by handling one feature per component.

### Phase 9.1: Home Feature Components

#### CredentialsSection.tsx

**File**: `frontend/src/components/features/home/CredentialsSection.tsx`

**Purpose**: Displays Qwen credentials status with login/logout actions for the home page.

```typescript
// frontend/src/components/features/home/CredentialsSection.tsx
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Key, RefreshCw, LogIn } from 'lucide-react';
import type { CredentialStatus } from '@/types/credentials.types';
import { credentialsService } from '@/services/credentials.service';

interface CredentialsSectionProps {
  credStatus: CredentialStatus;
  credLoading: boolean;
  credError: string | null;
  onLogin: () => void;
  onLogout: () => void;
  onRefreshCreds: () => void;
}

export function CredentialsSection({
  credStatus,
  credLoading,
  credError,
  onLogin,
  onLogout,
  onRefreshCreds
}: CredentialsSectionProps) {
  const statusInfo = credentialsService.getStatusInfo(credStatus);
  const StatusIcon = statusInfo.icon;

  return (
    <div className="home-section">
      <div className="home-section-header">
        <div className="home-section-title">
          <Key className="icon-sm" />
          Qwen Credentials
        </div>
        <Button variant="ghost" size="sm" onClick={onRefreshCreds} disabled={credLoading}>
          <RefreshCw className="icon-sm" />
        </Button>
      </div>

      <div className="credentials-status-row">
        <StatusIcon className={`credentials-status-icon ${statusInfo.color}`} />
        <Badge variant={statusInfo.variant} className="credentials-status-badge">
          {statusInfo.label}
        </Badge>
      </div>

      {credError && (
        <div className="credentials-error-message">
          <p className="credentials-error-text">{credError}</p>
        </div>
      )}

      {credStatus.expiresAt && (
        <div className="credentials-info-section-compact">
          <div className="home-uptime-row">
            <span className="home-uptime-label">Expires:</span>
            <span className="home-uptime-value">
              {credentialsService.formatExpiration(credStatus.expiresAt)}
            </span>
          </div>
          <div className="home-uptime-row">
            <span className="home-uptime-label">Time remaining:</span>
            <span className="home-uptime-value">
              {credentialsService.getTimeRemaining(credStatus.expiresAt)}
            </span>
          </div>
          <div className="home-control-buttons">
            <Button variant="destructive" onClick={onLogout} disabled={credLoading} size="sm">
              Logout
            </Button>
          </div>
        </div>
      )}

      {!credStatus.expiresAt && (
        <div className="credentials-logged-out-section-compact">
          <p className="credentials-logged-out-text">Log in to use Qwen models</p>
          <Button onClick={onLogin} disabled={credLoading} size="sm">
            <LogIn className="icon-sm credentials-button-icon" />
            Login to Qwen
          </Button>
        </div>
      )}
    </div>
  );
}
```

#### ProxyStatusSection.tsx

**File**: `frontend/src/components/features/home/ProxyStatusSection.tsx`

**Purpose**: Displays proxy server status with start/stop controls for the home page.

```typescript
// frontend/src/components/features/home/ProxyStatusSection.tsx
import { Button } from '@/components/ui/button';
import { StatusIndicator } from '@/components/ui/status-indicator';
import { Play, Square, RefreshCw } from 'lucide-react';
import { proxyService } from '@/services/proxy.service';

interface ProxyStatusSectionProps {
  isRunning: boolean;
  startedTime: Date | null;
  uptime: number | undefined;
  loading: boolean;
  onStart: () => void;
  onStop: () => void;
}

export function ProxyStatusSection({
  isRunning,
  startedTime,
  uptime,
  loading,
  onStart,
  onStop
}: ProxyStatusSectionProps) {
  return (
    <div className="home-section">
      <div className="home-section-title">Proxy Status</div>
      <div className="home-status-indicator">
        <div className="home-status-badge">
          {isRunning ? (
            <>
              <StatusIndicator status="running" />
              <span className="home-status-label">RUNNING</span>
            </>
          ) : (
            <>
              <StatusIndicator status="stopped" />
              <span className="home-status-label-inactive">STOPPED</span>
            </>
          )}
        </div>
      </div>

      {isRunning && (
        <div className="home-uptime-section">
          <div className="home-uptime-row">
            <span className="home-uptime-label">Started:</span>
            <span className="home-uptime-value">{proxyService.formatTime(startedTime)}</span>
          </div>
          <div className="home-uptime-row">
            <span className="home-uptime-label">Uptime:</span>
            <span className="home-uptime-value">{proxyService.formatUptime(uptime)}</span>
          </div>
        </div>
      )}

      <div className="home-control-buttons">
        {!isRunning ? (
          <Button onClick={onStart} disabled={loading} className="home-start-button">
            {loading ? (
              <>
                <RefreshCw className="icon-sm home-button-icon-spin" />
                Starting...
              </>
            ) : (
              <>
                <Play className="icon-sm" />
                Start Proxy
              </>
            )}
          </Button>
        ) : (
          <Button
            variant="destructive"
            onClick={onStop}
            disabled={loading}
            className="home-stop-button"
          >
            {loading ? (
              <>
                <RefreshCw className="icon-sm home-button-icon-spin" />
                Stopping...
              </>
            ) : (
              <>
                <Square className="icon-sm" />
                Stop Proxy
              </>
            )}
          </Button>
        )}
      </div>
    </div>
  );
}
```

---

### Phase 9.2: Chat Feature Components

#### ChatTestCard.tsx

**File**: `frontend/src/components/features/chat/ChatTestCard.tsx`

**Purpose**: Main card component for chat testing with three tabs: Quick Test, Custom Chat, and Try It Yourself.

```typescript
// frontend/src/components/features/chat/ChatTestCard.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { MessageSquare } from 'lucide-react';
import { QuickTestTab } from './QuickTestTab';
import { CustomChatTab } from './CustomChatTab';
import { CurlTab } from './CurlTab';
import type { ChatTestCardProps } from '@/types/components.types';

export function ChatTestCard({ providerRouterUrl, activeModel }: ChatTestCardProps) {
  const modelToUse = activeModel || 'qwen3-max';

  return (
    <Card className="page-card">
      <CardHeader>
        <CardTitle className="chat-test-card-title">
          <MessageSquare className="h-4 w-4" />
          Chat Completions
        </CardTitle>
      </CardHeader>
      <CardContent className="page-card-content">
        <Tabs defaultValue="quick" className="w-full">
          <TabsList className="grid w-full grid-cols-3">
            <TabsTrigger value="quick">Quick Test</TabsTrigger>
            <TabsTrigger value="custom">Custom Chat</TabsTrigger>
            <TabsTrigger value="curl">Try It Yourself</TabsTrigger>
          </TabsList>

          <TabsContent value="quick" className="mt-4">
            <QuickTestTab
              providerRouterUrl={providerRouterUrl}
              model={modelToUse}
            />
          </TabsContent>

          <TabsContent value="custom" className="mt-4">
            <CustomChatTab
              providerRouterUrl={providerRouterUrl}
              model={modelToUse}
            />
          </TabsContent>

          <TabsContent value="curl" className="mt-4">
            <CurlTab
              providerRouterUrl={providerRouterUrl}
              model={modelToUse}
            />
          </TabsContent>
        </Tabs>
      </CardContent>
    </Card>
  );
}
```

#### CurlTab.tsx

**File**: `frontend/src/components/features/chat/CurlTab.tsx`

**Purpose**: Displays curl command examples for testing chat completions.

```typescript
// frontend/src/components/features/chat/CurlTab.tsx
import { MessageSquare } from 'lucide-react';
import { CodeBlock } from '@/components/features/quick-guide/CodeBlock';
import type { CurlTabProps } from '@/types/components.types';

export function CurlTab({ providerRouterUrl, model }: CurlTabProps) {
  return (
    <div className="chat-curl-container">
      <p className="chat-curl-description">
        Use this curl command to test the chat completion endpoint directly from your terminal. The model and provider shown in the status bar will be used automatically.
      </p>

      <CodeBlock
        label="Copy and run in your terminal:"
        code={`curl ${providerRouterUrl || 'http://localhost:3001'}/v1/chat/completions \\
  -H "Content-Type: application/json" \\
  -H "Authorization: Bearer any-key" \\
  -d '{
    "model": "${model}",
    "messages": [
      {"role": "user", "content": "Say hello in one sentence"}
    ]
  }'`}
      />

      <div className="chat-curl-response-container">
        <div className="chat-curl-response-header">
          <div className="chat-curl-response-label">
            <MessageSquare className="h-4 w-4 text-primary" />
            <span className="chat-curl-response-label-text">Response Format</span>
          </div>
        </div>
        <div className="chat-curl-response-content">
          <p className="chat-curl-response-description">
            The endpoint returns a JSON object with the completion response:
          </p>
          <pre className="chat-curl-response-code">
{`{
  "id": "chatcmpl-123",
  "object": "chat.completion",
  "created": 1234567890,
  "model": "${model}",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Hello! How can I help you today?"
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 10,
    "completion_tokens": 20,
    "total_tokens": 30
  }
}`}
          </pre>
        </div>
      </div>
    </div>
  );
}
```

#### CustomChatTab.tsx

**File**: `frontend/src/components/features/chat/CustomChatTab.tsx`

**Purpose**: Interactive chat interface with custom prompt input.

```typescript
// frontend/src/components/features/chat/CustomChatTab.tsx
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { Send, RefreshCw } from 'lucide-react';
import { useCustomChat } from '@/hooks/useCustomChat';
import { ThinkingSection } from './ThinkingSection';
import { ResponseSection } from './ResponseSection';
import type { CustomChatTabProps } from '@/types/components.types';

export function CustomChatTab({ providerRouterUrl, model }: CustomChatTabProps) {
  const {
    prompt,
    setPrompt,
    response,
    loading,
    handleSend,
    handleKeyPress,
    thinking,
    mainResponse,
  } = useCustomChat();

  return (
    <div className="chat-custom-container">
      <p className="chat-custom-description">
        Enter your own prompt and send it to the active provider. The response will appear below.
      </p>

      <div className="chat-custom-form">
        <label className="chat-custom-label">Your Prompt</label>
        <Textarea
          value={prompt}
          onChange={(e) => setPrompt(e.target.value)}
          onKeyDown={(e) => handleKeyPress(e, providerRouterUrl, model)}
          placeholder="Type your message here... (Press Enter to send, Shift+Enter for new line)"
          className="chat-custom-textarea"
          disabled={loading}
        />
        <div className="chat-custom-actions">
          <Button
            onClick={() => handleSend(providerRouterUrl, model)}
            disabled={loading || !prompt.trim()}
            size="sm"
            className="chat-custom-send-button"
          >
            {loading ? (
              <>
                <RefreshCw className="h-4 w-4 animate-spin" />
                Sending...
              </>
            ) : (
              <>
                <Send className="h-4 w-4" />
                Send
              </>
            )}
          </Button>
        </div>
      </div>

      {(response || loading) && (
        <div className="chat-custom-response-container">
          {thinking && <ThinkingSection thinking={thinking} />}
          <ResponseSection mainResponse={mainResponse} loading={loading} />
        </div>
      )}
    </div>
  );
}
```

#### QuickTestTab.tsx

**File**: `frontend/src/components/features/chat/QuickTestTab.tsx`

**Purpose**: One-click chat test with predefined prompt.

```typescript
// frontend/src/components/features/chat/QuickTestTab.tsx
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { RefreshCw, Play, Zap } from 'lucide-react';
import { useQuickChatTest } from '@/hooks/useQuickChatTest';
import type { QuickTestTabProps } from '@/types/components.types';

export function QuickTestTab({ providerRouterUrl, model }: QuickTestTabProps) {
  const { response, loading, handleTest } = useQuickChatTest();

  return (
    <div className="chat-quick-test-container">
      <p className="chat-quick-test-description">
        Send a chat completion request to the active provider. The Provider Router automatically routes your request based on the configured provider.
      </p>

      <div className="chat-quick-test-demo">
        <div className="chat-quick-test-header">
          <div className="chat-quick-test-label">
            <Zap className="h-4 w-4 text-primary" />
            <span className="chat-quick-test-label-text">Test Response</span>
          </div>
          <div className="chat-quick-test-actions">
            {loading && (
              <Badge variant="secondary" className="chat-quick-test-badge">
                <RefreshCw className="h-3 w-3 animate-spin" />
                Waiting...
              </Badge>
            )}
            <Button
              onClick={() => handleTest(providerRouterUrl, model)}
              disabled={loading}
              size="icon"
              variant="outline"
              title="Test chat completion"
              className="chat-quick-test-button"
            >
              {loading ? (
                <RefreshCw className="h-3.5 w-3.5 animate-spin" />
              ) : (
                <Play className="h-3.5 w-3.5" />
              )}
            </Button>
          </div>
        </div>
        {response && (
          <div className="chat-quick-test-content">{response}</div>
        )}
        {!response && !loading && (
          <div className="chat-quick-test-empty">
            Click the <Play className="status-icon-inline" /> button above to test a chat completion
          </div>
        )}
      </div>
    </div>
  );
}
```

#### ResponseSection.tsx

**File**: `frontend/src/components/features/chat/ResponseSection.tsx`

**Purpose**: Displays AI response with loading state.

```typescript
// frontend/src/components/features/chat/ResponseSection.tsx
import { Badge } from '@/components/ui/badge';
import { MessageSquare, RefreshCw } from 'lucide-react';
import type { ResponseSectionProps } from '@/types/components.types';

export function ResponseSection({ mainResponse, loading }: ResponseSectionProps) {
  return (
    <div className="chat-response-container">
      <div className="chat-response-header">
        <div className="chat-response-label">
          <MessageSquare className="h-4 w-4 text-primary" />
          <span className="chat-response-label-text">Response</span>
        </div>
        {loading && (
          <Badge variant="secondary" className="chat-response-badge">
            <RefreshCw className="h-3 w-3 animate-spin" />
            Waiting...
          </Badge>
        )}
      </div>
      {mainResponse && (
        <div className="chat-response-content">{mainResponse}</div>
      )}
      {loading && !mainResponse && (
        <div className="chat-response-loading">
          Sending request...
        </div>
      )}
    </div>
  );
}
```

#### ThinkingSection.tsx

**File**: `frontend/src/components/features/chat/ThinkingSection.tsx`

**Purpose**: Collapsible section for displaying AI thinking process.

```typescript
// frontend/src/components/features/chat/ThinkingSection.tsx
import { useState } from 'react';
import { ChevronDown, ChevronRight, Brain } from 'lucide-react';
import type { ThinkingSectionProps } from '@/types/components.types';

export function ThinkingSection({ thinking }: ThinkingSectionProps) {
  const [showThinking, setShowThinking] = useState(false);

  return (
    <div className="chat-thinking-container">
      <button
        onClick={() => setShowThinking(!showThinking)}
        className="chat-thinking-header"
      >
        <div className="chat-thinking-label">
          <Brain className="h-4 w-4 text-muted-foreground" />
          <span className="chat-thinking-label-text">Thinking Process</span>
        </div>
        {showThinking ? (
          <ChevronDown className="h-4 w-4 text-muted-foreground" />
        ) : (
          <ChevronRight className="h-4 w-4 text-muted-foreground" />
        )}
      </button>
      {showThinking && (
        <div className="chat-thinking-content">
          {thinking}
        </div>
      )}
    </div>
  );
}
```

---

### Phase 9.3: Providers & Models Components

#### ProvidersTable.tsx

**File**: `frontend/src/components/features/providers/ProvidersTable.tsx`

**Purpose**: Table displaying all providers with enable/disable, test, and delete actions.

```typescript
// frontend/src/components/features/providers/ProvidersTable.tsx
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { MoreVertical, Plus, Settings, TestTube2, Trash2, Power, PowerOff } from 'lucide-react';
import type { ProvidersTableProps } from '@/types/providers.types';

export function ProvidersTable({
  providers,
  actionLoading,
  onToggleEnabled,
  onTest,
  onDelete,
  onCreate,
  onRowClick,
}: ProvidersTableProps) {
  return (
    <div className="flex-1 flex flex-col gap-4">
      <p className="step-description">
        Manage all providers in your system. Create, enable, disable, test, and delete providers:
      </p>

      <div className="demo-container flex-1">
        <div className="demo-header">
          <div className="demo-label">
            <Settings className="icon-primary" />
            <span className="demo-label-text">Provider Management</span>
          </div>
          {onCreate && (
            <Button onClick={onCreate} size="sm" variant="outline">
              <Plus className="h-4 w-4 mr-2" />
              New Provider
            </Button>
          )}
        </div>

        {providers.length === 0 ? (
          <div className="demo-error-state">No providers configured</div>
        ) : (
          <div className="flex-1 overflow-y-auto">
            <Table>
              <TableHeader>
                <TableRow>
                  <TableHead>Name</TableHead>
                  <TableHead>Type</TableHead>
                  <TableHead>Status</TableHead>
                  <TableHead className="providers-table-actions-header">Actions</TableHead>
                </TableRow>
              </TableHeader>
              <TableBody>
                {providers.map((provider) => (
                  <TableRow
                    key={provider.id}
                    onClick={() => onRowClick?.(provider.id)}
                    className="cursor-pointer hover:bg-muted/50"
                  >
                    <TableCell className="providers-table-name">{provider.name}</TableCell>
                    <TableCell>
                      <Badge variant="outline">{provider.type}</Badge>
                    </TableCell>
                    <TableCell>
                      <Badge variant={provider.enabled ? 'default' : 'secondary'}>
                        {provider.enabled ? 'Enabled' : 'Disabled'}
                      </Badge>
                    </TableCell>
                    <TableCell className="providers-table-actions" onClick={(e) => e.stopPropagation()}>
                      <DropdownMenu>
                        <DropdownMenuTrigger asChild>
                          <Button variant="ghost" size="sm">
                            <MoreVertical className="icon-sm" />
                          </Button>
                        </DropdownMenuTrigger>
                        <DropdownMenuContent align="end">
                          <DropdownMenuItem
                            onClick={() => onToggleEnabled(provider)}
                            disabled={
                              actionLoading === `enable-${provider.id}` ||
                              actionLoading === `disable-${provider.id}`
                            }
                          >
                            {provider.enabled ? (
                              <>
                                <PowerOff className="h-4 w-4 mr-2" />
                                Disable
                              </>
                            ) : (
                              <>
                                <Power className="h-4 w-4 mr-2" />
                                Enable
                              </>
                            )}
                          </DropdownMenuItem>
                          <DropdownMenuItem
                            onClick={() => onTest(provider)}
                            disabled={actionLoading === `test-${provider.id}`}
                          >
                            <TestTube2 className="h-4 w-4 mr-2" />
                            Test Connection
                          </DropdownMenuItem>
                          <DropdownMenuItem
                            className="providers-table-delete"
                            onClick={() => onDelete(provider)}
                            disabled={actionLoading === `delete-${provider.id}`}
                          >
                            <Trash2 className="h-4 w-4 mr-2" />
                            Delete
                          </DropdownMenuItem>
                        </DropdownMenuContent>
                      </DropdownMenu>
                    </TableCell>
                  </TableRow>
                ))}
              </TableBody>
            </Table>
          </div>
        )}
      </div>
    </div>
  );
}
```

#### ModelCard.tsx

**File**: `frontend/src/components/features/models/ModelCard.tsx`

**Purpose**: Card displaying model information with capabilities.

```typescript
// frontend/src/components/features/models/ModelCard.tsx
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { MessageSquare, Eye, Wrench, Cpu } from 'lucide-react';
import { modelsService } from '@/services/models.service';
import type { ParsedModel, Capability } from '@/types/models.types';

interface ModelCardProps {
  model: ParsedModel;
}

const CAPABILITY_ICONS = {
  chat: MessageSquare,
  vision: Eye,
  'tool-call': Wrench,
  code: Cpu,
};

export function ModelCard({ model }: ModelCardProps) {
  const getUniqueCapabilities = (capabilities: Capability[]) => {
    const uniqueDisplays = new Map();

    capabilities.forEach((cap) => {
      const display = modelsService.getCapabilityDisplay(cap);
      if (display && !uniqueDisplays.has(display.label)) {
        uniqueDisplays.set(display.label, display);
      }
    });

    return Array.from(uniqueDisplays.values());
  };

  const capabilities = getUniqueCapabilities(model.capabilities);

  return (
    <Card className="models-card">
      <CardHeader>
        <CardTitle className="models-card-title">{model.name}</CardTitle>
        <CardDescription className="models-card-description">{model.description}</CardDescription>
      </CardHeader>
      <CardContent className="models-card-content">
        <div className="models-card-capabilities">
          {capabilities.map((display) => {
            const Icon = CAPABILITY_ICONS[display.label as keyof typeof CAPABILITY_ICONS];
            return (
              <Badge key={display.label} variant="outline" className="models-capability-badge">
                {Icon && <Icon className={`icon-xs ${display.color}`} />}
                <span className="models-capability-label">{display.label}</span>
              </Badge>
            );
          })}
        </div>

        <div className="models-card-provider">
          <p className="models-card-provider-text">via {model.provider}</p>
        </div>
      </CardContent>
    </Card>
  );
}
```

#### ModelDetailsDialog.tsx

**File**: `frontend/src/components/features/models/ModelDetailsDialog.tsx`

**Purpose**: Dialog showing detailed model information.

```typescript
// frontend/src/components/features/models/ModelDetailsDialog.tsx
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import { Badge } from '@/components/ui/badge';
import { MessageSquare, Eye, Wrench, Cpu } from 'lucide-react';
import { modelsService } from '@/services/models.service';
import type { ParsedModel, Capability } from '@/types/models.types';

interface ModelDetailsDialogProps {
  open: boolean;
  model: ParsedModel | null;
  onClose: () => void;
}

const CAPABILITY_ICONS = {
  chat: MessageSquare,
  vision: Eye,
  'tool-call': Wrench,
  code: Cpu,
};

export function ModelDetailsDialog({
  open,
  model,
  onClose,
}: ModelDetailsDialogProps) {
  if (!model) return null;

  const getUniqueCapabilities = (capabilities: Capability[]) => {
    const uniqueDisplays = new Map();

    capabilities.forEach((cap) => {
      const display = modelsService.getCapabilityDisplay(cap);
      if (display && !uniqueDisplays.has(display.label)) {
        uniqueDisplays.set(display.label, display);
      }
    });

    return Array.from(uniqueDisplays.values());
  };

  const capabilities = getUniqueCapabilities(model.capabilities);

  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="model-details-dialog">
        <DialogHeader>
          <DialogTitle>{model.name}</DialogTitle>
          <DialogDescription>
            <code className="step-inline-code">{model.id}</code>
          </DialogDescription>
        </DialogHeader>

        <div className="model-details-content">
          {model.description && (
            <div className="model-details-section">
              <h4 className="model-details-label">Description</h4>
              <p className="model-details-text">{model.description}</p>
            </div>
          )}

          {capabilities.length > 0 && (
            <div className="model-details-section">
              <h4 className="model-details-label">Capabilities</h4>
              <div className="model-details-capabilities">
                {capabilities.map((display) => {
                  const Icon = CAPABILITY_ICONS[display.label as keyof typeof CAPABILITY_ICONS];
                  return (
                    <Badge key={display.label} variant="outline" className="models-capability-badge">
                      {Icon && <Icon className={`icon-xs ${display.color}`} />}
                      <span className="models-capability-label">{display.label}</span>
                    </Badge>
                  );
                })}
              </div>
            </div>
          )}

          {model.provider && model.provider !== 'Unknown' && (
            <div className="model-details-section">
              <h4 className="model-details-label">Provider</h4>
              <Badge variant="secondary">{model.provider}</Badge>
            </div>
          )}
        </div>
      </DialogContent>
    </Dialog>
  );
}
```

---

### Phase 9.4: Credentials Components

#### CredentialsStatusCard.tsx

**File**: `frontend/src/components/features/credentials/CredentialsStatusCard.tsx`

**Purpose**: Full-page credentials status card (Settings page version).

```typescript
// frontend/src/components/features/credentials/CredentialsStatusCard.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Key, LogIn } from 'lucide-react';
import { credentialsService } from '@/services/credentials.service';
import type { CredentialStatus } from '@/types/credentials.types';

interface CredentialsStatusCardProps {
  status: CredentialStatus;
  loading: boolean;
  error: string | null;
  onLogin: () => void;
  onLogout: () => void;
  onRefresh: () => void;
}

export function CredentialsStatusCard({
  status,
  loading,
  error,
  onLogin,
  onLogout,
  onRefresh,
}: CredentialsStatusCardProps) {
  const statusInfo = credentialsService.getStatusInfo(status);
  const StatusIcon = statusInfo.icon;

  return (
    <Card>
      <CardHeader>
        <div className="credentials-card-header">
          <div className="credentials-card-title-row">
            <Key className="icon-md credentials-icon" />
            <CardTitle>Qwen Credentials</CardTitle>
          </div>
          <Button variant="ghost" size="sm" onClick={onRefresh} disabled={loading}>
            Refresh
          </Button>
        </div>
      </CardHeader>
      <CardContent className="credentials-card-content">
        <div className="credentials-status-row">
          <StatusIcon className={`credentials-status-icon ${statusInfo.color}`} />
          <Badge variant={statusInfo.variant} className="credentials-status-badge">
            {statusInfo.label}
          </Badge>
        </div>

        {error && (
          <div className="credentials-error-message">
            <p className="credentials-error-text">{error}</p>
          </div>
        )}

        {status.expiresAt && (
          <div className="credentials-info-section">
            <div className="credentials-info-row">
              <p className="credentials-info-label">Expires</p>
              <p className="credentials-info-value">
                {credentialsService.formatExpiration(status.expiresAt)}
              </p>
            </div>
            <div className="credentials-info-row">
              <p className="credentials-info-label">Time remaining</p>
              <p className="credentials-info-value">
                {credentialsService.getTimeRemaining(status.expiresAt)}
              </p>
            </div>
            <div className="credentials-action-section">
              <Button variant="destructive" onClick={onLogout} disabled={loading}>
                Logout
              </Button>
            </div>
          </div>
        )}

        {!status.expiresAt && (
          <div className="credentials-logged-out-section">
            <p className="credentials-logged-out-text">Log in to use Qwen models</p>
            <Button onClick={onLogin} disabled={loading}>
              <LogIn className="icon-sm credentials-button-icon" />
              Login to Qwen
            </Button>
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

#### LoginInstructionsCard.tsx

**File**: `frontend/src/components/features/credentials/LoginInstructionsCard.tsx`

**Purpose**: Instructions for logging in to Qwen.

```typescript
// frontend/src/components/features/credentials/LoginInstructionsCard.tsx
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

export function LoginInstructionsCard() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>How to Log In</CardTitle>
        <CardDescription>Follow these steps to authenticate with Qwen</CardDescription>
      </CardHeader>
      <CardContent>
        <ol className="credentials-instructions-list">
          <li>Click "Login to Qwen" button above</li>
          <li>Follow extension installation instructions (one-time setup)</li>
          <li>Log in at chat.qwen.ai with your Qwen account</li>
          <li>Extension captures credentials automatically</li>
        </ol>
        <div className="credentials-instructions-footer">
          <Button variant="outline" size="sm" asChild>
            <a
              href="https://github.com/yourusername/qwen-extension"
              target="_blank"
              rel="noopener noreferrer"
            >
              Install Extension
            </a>
          </Button>
        </div>
      </CardContent>
    </Card>
  );
}
```

#### LogoutDialog.tsx

**File**: `frontend/src/components/features/credentials/LogoutDialog.tsx`

**Purpose**: Confirmation dialog for logging out.

```typescript
// frontend/src/components/features/credentials/LogoutDialog.tsx
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import { Button } from '@/components/ui/button';

interface LogoutDialogProps {
  open: boolean;
  loading: boolean;
  onConfirm: () => void;
  onCancel: () => void;
}

export function LogoutDialog({ open, loading, onConfirm, onCancel }: LogoutDialogProps) {
  return (
    <Dialog open={open} onOpenChange={onCancel}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Confirm Logout</DialogTitle>
          <DialogDescription>
            Are you sure you want to log out? You'll need to log in again to use Qwen models.
          </DialogDescription>
        </DialogHeader>
        <DialogFooter>
          <Button variant="outline" onClick={onCancel}>
            Cancel
          </Button>
          <Button variant="destructive" onClick={onConfirm} disabled={loading}>
            {loading ? 'Logging out...' : 'Logout'}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

---

### Phase 9.5: Quick Guide Components

#### ChatCompletionStep.tsx

**File**: `frontend/src/components/features/quick-guide/ChatCompletionStep.tsx`

**Purpose**: Guide step for testing chat completions.

```typescript
// frontend/src/components/features/quick-guide/ChatCompletionStep.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Play, RefreshCw, Zap, Database } from 'lucide-react';
import type { ChatCompletionStepProps } from '@/types/quick-guide.types';
import { CodeBlock } from '@/components/features/quick-guide/CodeBlock';

export function ChatCompletionStep({ response, loading, onTest, providerRouterUrl, activeModel }: ChatCompletionStepProps) {
  const modelToUse = activeModel || 'qwen3-max';
  return (
    <Card>
      <CardHeader>
        <CardTitle className="card-title-with-icon">
          <Zap className="icon-sm" />
          Test Chat Completion
        </CardTitle>
      </CardHeader>
      <CardContent className="vspace-md">
        <CodeBlock
          label="Try it yourself:"
          code={`curl ${providerRouterUrl || 'http://localhost:3001'}/v1/chat/completions \\
  -H "Content-Type: application/json" \\
  -H "Authorization: Bearer any-key" \\
  -d '{
    "model": "${modelToUse}",
    "messages": [
      {"role": "user", "content": "Say hello in one sentence"}
    ]
  }'`}
        />

        <p className="step-description">
          Send a chat completion request to the active provider. The Provider Router automatically routes your request based on the configured provider.
        </p>

        <div className="demo-container">
          <div className="demo-header">
            <div className="demo-label">
              <Zap className="icon-sm-muted" />
              <span className="demo-label-text">Test Response</span>
            </div>
            <div className="flex items-center gap-2">
              <Badge variant="secondary" className="gap-1">
                <Database className="h-3 w-3" />
                {modelToUse}
              </Badge>
              {loading && (
                <Badge variant="secondary" className="gap-1">
                  <RefreshCw className="h-3 w-3 animate-spin" />
                  Waiting...
                </Badge>
              )}
              <Button
                onClick={onTest}
                disabled={loading}
                size="icon"
                variant="outline"
                title="Test chat completion"
                className="h-7 w-7"
              >
                {loading ? (
                  <RefreshCw className="h-3.5 w-3.5 animate-spin" />
                ) : (
                  <Play className="h-3.5 w-3.5" />
                )}
              </Button>
            </div>
          </div>
          {response && (
            <div className="demo-content">{response}</div>
          )}
          {!response && !loading && (
            <div className="demo-empty-state">
              Click the <Play className="status-icon-inline" /> button above to test a chat completion
            </div>
          )}
        </div>
      </CardContent>
    </Card>
  );
}
```

#### CodeBlock.tsx

**File**: `frontend/src/components/features/quick-guide/CodeBlock.tsx`

**Purpose**: Code block with copy-to-clipboard functionality.

```typescript
// frontend/src/components/features/quick-guide/CodeBlock.tsx
import { Button } from '@/components/ui/button';
import { Copy, Check } from 'lucide-react';
import { useState } from 'react';
import type { CodeBlockProps } from '@/types/quick-guide.types';

export function CodeBlock({ label, code }: CodeBlockProps) {
  const [copied, setCopied] = useState(false);

  const handleCopy = () => {
    navigator.clipboard.writeText(code);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className="code-block-container">
      <div className="code-block-label">{label}</div>
      <div className="code-block-wrapper">
        <pre className="code-block-pre">
          <code className="code-block-code">{code}</code>
        </pre>
        <Button
          size="icon"
          variant="ghost"
          onClick={handleCopy}
          className="code-block-copy-button"
          title="Copy code"
        >
          {copied ? (
            <Check className="h-3.5 w-3.5 status-icon-success" />
          ) : (
            <Copy className="h-3.5 w-3.5" />
          )}
        </Button>
      </div>
    </div>
  );
}
```

#### ModelsBrowseTab.tsx

**File**: `frontend/src/components/features/quick-guide/ModelsBrowseTab.tsx`

**Purpose**: Tab for browsing all models with filtering capabilities.

```typescript
// frontend/src/components/features/quick-guide/ModelsBrowseTab.tsx
import { useState } from 'react';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Database, RefreshCw, XCircle, CheckCircle2 } from 'lucide-react';
import { cn } from '@/lib/utils';
import { ModelDetailsDialog } from '@/components/features/models/ModelDetailsDialog';
import type { ParsedModel, CapabilityFilter } from '@/types/models.types';

interface ModelsBrowseTabProps {
  models: ParsedModel[];
  loading: boolean;
  onRefresh: () => void;
  capabilityFilter: CapabilityFilter;
  providerFilter: string;
  providers: string[];
  onCapabilityChange: (value: CapabilityFilter) => void;
  onProviderChange: (value: string) => void;
  onClearFilters: () => void;
  error: string | null;
}

export function ModelsBrowseTab({
  models,
  loading,
  onRefresh,
  capabilityFilter,
  providerFilter,
  providers,
  onCapabilityChange,
  onProviderChange,
  onClearFilters,
  error
}: ModelsBrowseTabProps) {
  const [selectedModel, setSelectedModel] = useState<ParsedModel | null>(null);
  const [dialogOpen, setDialogOpen] = useState(false);

  const handleModelClick = (model: ParsedModel) => {
    setSelectedModel(model);
    setDialogOpen(true);
  };

  const handleDialogClose = () => {
    setDialogOpen(false);
    setSelectedModel(null);
  };

  return (
    <div className="flex-1 flex flex-col gap-4">
      <p className="step-description">
        Browse all available models from enabled providers. Filter by capability or provider:
      </p>

      <div className="demo-container flex-1">
        {/* Header Row 1: Label + Actions */}
        <div className="demo-header">
          <div className="demo-label">
            <Database className="icon-sm-muted" />
            <span className="demo-label-text">Browse Models</span>
          </div>
          <div className="model-header-actions">
            {loading && (
              <Badge variant="secondary" className="model-loading-badge">
                <RefreshCw className="model-loading-icon" />
                Loading...
              </Badge>
            )}
            {!loading && models.length > 0 && (
              <Badge variant="secondary" className="model-count-badge">
                <CheckCircle2 className="model-count-icon" />
                {models.length} {models.length === 1 ? 'model' : 'models'}
              </Badge>
            )}
            <Button
              onClick={onRefresh}
              disabled={loading}
              size="icon"
              variant="outline"
              title="Refresh models"
              className="model-refresh-button"
            >
              <RefreshCw className={cn('model-refresh-icon', loading && 'animate-spin')} />
            </Button>
          </div>
        </div>

        {/* Header Row 2: Filters */}
        <div className="model-filters-row">
          <div className="model-filter-group">
            <span className="model-filter-label">Capability:</span>
            <Select value={capabilityFilter} onValueChange={onCapabilityChange}>
              <SelectTrigger className="models-filter-select">
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">All Capabilities</SelectItem>
                <SelectItem value="chat">Chat</SelectItem>
                <SelectItem value="vision">Vision</SelectItem>
                <SelectItem value="tool-call">Tool Calling</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="model-filter-group">
            <span className="model-filter-label">Provider:</span>
            <Select value={providerFilter} onValueChange={onProviderChange}>
              <SelectTrigger className="models-filter-select">
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">All Providers</SelectItem>
                {providers.map((provider) => (
                  <SelectItem key={provider} value={provider}>
                    {provider}
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>
          </div>
        </div>

        {/* Models List */}
        {!loading && !error && models.length > 0 && (
          <div className="model-list-container">
            {models.map((model) => (
              <button
                key={model.id}
                onClick={() => handleModelClick(model)}
                className={cn('model-item', 'cursor-pointer hover:bg-accent')}
              >
                <div className="model-item-left">
                  <code className="model-item-code">{model.id}</code>
                </div>
                <Badge variant="outline" className="model-item-badge">
                  Available
                </Badge>
              </button>
            ))}
          </div>
        )}

        {/* Error State */}
        {error && (
          <div className="demo-error-state">
            <XCircle className="icon-sm" />
            <span>{error}</span>
          </div>
        )}

        {/* Empty State */}
        {!loading && !error && models.length === 0 && (
          <div className="demo-error-state">
            <Database className="icon-sm" />
            <span>No models found matching your filters</span>
            <Button variant="outline" size="sm" onClick={onClearFilters}>
              Clear filters
            </Button>
          </div>
        )}

        {/* Loading State */}
        {loading && (
          <div className="models-loading-state">
            <RefreshCw className="icon-lg models-loading-spinner" />
          </div>
        )}
      </div>

      <ModelDetailsDialog
        open={dialogOpen}
        model={selectedModel}
        onClose={handleDialogClose}
      />
    </div>
  );
}
```

#### ModelsSelectTab.tsx

**File**: `frontend/src/components/features/quick-guide/ModelsSelectTab.tsx`

**Purpose**: Tab for selecting active model from available models list.

```typescript
// frontend/src/components/features/quick-guide/ModelsSelectTab.tsx
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Database, RefreshCw, CheckCircle2, XCircle, Check } from 'lucide-react';
import type { Model } from '@/types/proxy.types';
import { cn } from '@/lib/utils';

interface ModelsSelectTabProps {
  models: Model[];
  loading: boolean;
  onRefresh: () => void;
  activeModel?: string;
  onSelectModel?: (modelId: string) => void;
}

export function ModelsSelectTab({
  models,
  loading,
  onRefresh,
  activeModel,
  onSelectModel
}: ModelsSelectTabProps) {
  return (
    <div className="flex-1 flex flex-col gap-4">
      <p className="step-description">
        The Provider Router exposes an OpenAI-compatible endpoint at{' '}
        <code className="step-inline-code">http://localhost:3001/v1</code>.
        Select an active model to use:
      </p>

      <div className="demo-container flex-1">
        <div className="demo-header">
          <div className="demo-label">
            <Database className="icon-sm-muted" />
            <span className="demo-label-text">Available Models</span>
          </div>
          <div className="model-header-actions">
            {loading && (
              <Badge variant="secondary" className="model-loading-badge">
                <RefreshCw className="model-loading-icon" />
                Loading...
              </Badge>
            )}
            {!loading && models.length > 0 && (
              <Badge variant="secondary" className="model-count-badge">
                <CheckCircle2 className="model-count-icon" />
                {models.length} models
              </Badge>
            )}
            <Button
              onClick={onRefresh}
              disabled={loading}
              size="icon"
              variant="outline"
              title="Refresh models"
              className="model-refresh-button"
            >
              <RefreshCw className={cn('model-refresh-icon', loading && 'animate-spin')} />
            </Button>
          </div>
        </div>
        {models.length > 0 && (
          <div className="model-list-container">
            {models.map((model) => {
              const isActive = activeModel === model.id;
              return (
                <button
                  key={model.id}
                  onClick={() => onSelectModel?.(model.id)}
                  disabled={!onSelectModel}
                  className={cn(
                    'model-item',
                    onSelectModel && 'cursor-pointer hover:bg-accent',
                    isActive && 'bg-accent'
                  )}
                >
                  <div className="model-item-left">
                    {isActive && <Check className="model-check-icon" />}
                    <code className="model-item-code">{model.id}</code>
                  </div>
                  <Badge variant={isActive ? 'default' : 'outline'} className="model-item-badge">
                    {isActive ? 'Active' : 'Ready'}
                  </Badge>
                </button>
              );
            })}
          </div>
        )}
        {!loading && models.length === 0 && (
          <div className="demo-error-state">
            <XCircle className="icon-sm" />
            <span>No models available. Make sure the Provider Router is running.</span>
          </div>
        )}
        {loading && (
          <div className="models-loading-state">
            <RefreshCw className="icon-lg models-loading-spinner" />
          </div>
        )}
      </div>
    </div>
  );
}
```

#### ModelsStep.tsx

**File**: `frontend/src/components/features/quick-guide/ModelsStep.tsx`

**Purpose**: Complete models step with multiple tabs (Select, Browse, Try It).

```typescript
// frontend/src/components/features/quick-guide/ModelsStep.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Database } from 'lucide-react';
import type { ModelsStepProps } from '@/types/quick-guide.types';
import { CodeBlock } from '@/components/features/quick-guide/CodeBlock';
import { ModelsSelectTab } from './ModelsSelectTab';
import { ModelsBrowseTab } from './ModelsBrowseTab';

export function ModelsStep({
  models,
  loading,
  onRefresh,
  providerRouterUrl,
  activeModel,
  onSelectModel,
  capabilityFilter,
  providerFilter,
  providers,
  setCapabilityFilter,
  setProviderFilter,
  clearFilters,
  error
}: ModelsStepProps) {
  return (
    <Card className="page-card">
      <CardHeader>
        <CardTitle className="card-title-with-icon">
          <Database className="icon-sm" />
          Models
        </CardTitle>
      </CardHeader>
      <CardContent className="page-card-content">
        <Tabs defaultValue="select" className="tab-container">
          <TabsList className="grid w-full grid-cols-3">
            <TabsTrigger value="select">Select Model</TabsTrigger>
            <TabsTrigger value="browse">Browse Models</TabsTrigger>
            <TabsTrigger value="curl">Try It Yourself</TabsTrigger>
          </TabsList>

          <TabsContent value="select" className="tab-content">
            <ModelsSelectTab
              models={models}
              loading={loading}
              onRefresh={onRefresh}
              activeModel={activeModel}
              onSelectModel={onSelectModel}
            />
          </TabsContent>

          <TabsContent value="browse" className="tab-content">
            {setCapabilityFilter && setProviderFilter && clearFilters && (
              <ModelsBrowseTab
                models={models}
                loading={loading}
                onRefresh={onRefresh}
                capabilityFilter={capabilityFilter || 'all'}
                providerFilter={providerFilter || 'all'}
                providers={providers || []}
                onCapabilityChange={setCapabilityFilter}
                onProviderChange={setProviderFilter}
                onClearFilters={clearFilters}
                error={error || null}
              />
            )}
          </TabsContent>

          <TabsContent value="curl" className="tab-content">
            <div className="vspace-md">
              <p className="step-description">
                Check which models are available via the API:
              </p>

              <CodeBlock
                label="Get available models:"
                code={`curl ${providerRouterUrl || 'http://localhost:3001'}/v1/models \\
  -H "Authorization: Bearer any-key"`}
              />
            </div>
          </TabsContent>
        </Tabs>
      </CardContent>
    </Card>
  );
}
```

#### ProviderSwitchStep.tsx

**File**: `frontend/src/components/features/quick-guide/ProviderSwitchStep.tsx`

**Purpose**: Complete provider switching step with multiple tabs.

```typescript
// frontend/src/components/features/quick-guide/ProviderSwitchStep.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Network } from 'lucide-react';
import type { ProviderSwitchStepProps } from '@/types/quick-guide.types';
import type { Provider } from '@/types/providers.types';
import { CodeBlock } from '@/components/features/quick-guide/CodeBlock';
import { ProvidersTable } from '@/components/features/providers/ProvidersTable';
import { ProviderSwitchTab } from './ProviderSwitchTab';

export function ProviderSwitchStep({
  providers,
  activeProvider,
  loading,
  onSwitch,
  apiBaseUrl,
  actionLoading,
  onToggleEnabled,
  onTest,
  onDelete,
  onCreate,
  onRowClick
}: ProviderSwitchStepProps) {
  // Create wrapper functions that convert string IDs to Provider objects for ProvidersTable
  const handleToggleEnabled = (provider: Provider) => {
    if (onToggleEnabled) {
      onToggleEnabled(provider.id);
    }
  };

  const handleTest = (provider: Provider) => {
    if (onTest) {
      onTest(provider.id);
    }
  };

  return (
    <Card className="page-card">
      <CardHeader>
        <CardTitle className="card-title-with-icon-sm">
          <Network className="icon-sm" />
          Providers
        </CardTitle>
      </CardHeader>
      <CardContent className="page-card-content">
        <Tabs defaultValue="switch" className="tab-container">
          <TabsList className="grid w-full grid-cols-3">
            <TabsTrigger value="switch">Switch Provider</TabsTrigger>
            <TabsTrigger value="all-providers">All Providers</TabsTrigger>
            <TabsTrigger value="curl">Try It Yourself</TabsTrigger>
          </TabsList>

          <TabsContent value="switch" className="tab-content">
            <ProviderSwitchTab
              providers={providers}
              activeProvider={activeProvider}
              loading={loading}
              onSwitch={onSwitch}
            />
          </TabsContent>

          <TabsContent value="all-providers" className="tab-content">
            {onToggleEnabled && onTest && onDelete && (
              <ProvidersTable
                providers={providers}
                actionLoading={actionLoading || null}
                onToggleEnabled={handleToggleEnabled}
                onTest={handleTest}
                onDelete={onDelete}
                onCreate={onCreate}
                onRowClick={onRowClick}
              />
            )}
          </TabsContent>

          <TabsContent value="curl" className="tab-content">
            <div className="vspace-md">
              <p className="step-description">
                Switch providers programmatically via the API:
              </p>

              <CodeBlock
                label="Switch to a specific provider:"
                code={`curl -X PUT ${apiBaseUrl || 'http://localhost:3002'}/api/settings/active_provider \\
  -H "Content-Type: application/json" \\
  -d '{"value": "qwen-proxy-default"}'`}
              />

              <CodeBlock
                label="Get current active provider:"
                code={`curl ${apiBaseUrl || 'http://localhost:3002'}/api/settings/active_provider`}
              />
            </div>
          </TabsContent>
        </Tabs>
      </CardContent>
    </Card>
  );
}
```

#### ProviderSwitchTab.tsx

**File**: `frontend/src/components/features/quick-guide/ProviderSwitchTab.tsx`

**Purpose**: Tab for switching between available providers.

```typescript
// frontend/src/components/features/quick-guide/ProviderSwitchTab.tsx
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { StatusIndicator } from '@/components/ui/status-indicator';
import { Network, RefreshCw, ArrowRight, XCircle } from 'lucide-react';
import type { Provider } from '@/types/providers.types';

interface ProviderSwitchTabProps {
  providers: Provider[];
  activeProvider: string;
  loading: boolean;
  onSwitch: (providerId: string) => void;
}

export function ProviderSwitchTab({
  providers,
  activeProvider,
  loading,
  onSwitch
}: ProviderSwitchTabProps) {
  return (
    <div className="flex-1 flex flex-col gap-4">
      <p className="step-description">
        The Provider Router can route to different AI backends. Switch providers dynamically without restarting:
      </p>

      <div className="demo-container flex-1">
        <div className="demo-header">
          <div className="demo-label">
            <Network className="icon-primary" />
            <span className="demo-label-text">Available Providers</span>
          </div>
          {loading && (
            <Badge variant="secondary" className="provider-loading-badge">
              <RefreshCw className="provider-loading-icon" />
              Loading...
            </Badge>
          )}
        </div>

        <div className="provider-switch-list">
          {providers.map((provider) => {
            const isActive = provider.id === activeProvider;
            const itemClassName = isActive
              ? 'provider-switch-item provider-switch-item-active'
              : 'provider-switch-item';

            return (
              <div key={provider.id} className={itemClassName}>
                <div className="provider-switch-info">
                  <StatusIndicator status={isActive ? 'running' : 'stopped'} />
                  <div className="provider-switch-details">
                    <div className="provider-switch-name">{provider.name}</div>
                    <div className="provider-switch-type">{provider.type}</div>
                  </div>
                </div>
                <div className="provider-switch-actions">
                  {isActive && (
                    <Badge variant="default" className="provider-badge-sm">Active</Badge>
                  )}
                  {!isActive && provider.enabled && (
                    <Button
                      onClick={() => onSwitch(provider.id)}
                      size="icon"
                      variant="outline"
                      title="Switch to this provider"
                      className="provider-switch-button"
                    >
                      <ArrowRight className="provider-switch-icon" />
                    </Button>
                  )}
                  {!provider.enabled && (
                    <Badge variant="outline" className="provider-badge-sm">Disabled</Badge>
                  )}
                </div>
              </div>
            );
          })}
        </div>

        {providers.length === 0 && !loading && (
          <div className="demo-error-state">
            <XCircle className="icon-sm" />
            <span>No providers configured. Check the Providers page.</span>
          </div>
        )}
      </div>
    </div>
  );
}
```

---

## Phase 10: Layout Components

### Phase 10.1: Core Layout Components

Layout components define the application structure and provide consistent navigation and status information across all pages.

#### AppLayout.tsx

**File**: `frontend/src/components/layout/AppLayout.tsx`

**Purpose**: Main application layout container that orchestrates TitleBar, Sidebar, StatusBar, and page content.

```typescript
// frontend/src/components/layout/AppLayout.tsx
import type { ReactNode } from 'react';
import { TitleBar } from './TitleBar';
import { Sidebar } from './Sidebar';
import { StatusBar } from './StatusBar';
import { useUIStore } from '@/stores/useUIStore';

interface AppLayoutProps {
  children: ReactNode;
}

export function AppLayout({ children }: AppLayoutProps) {
  const sidebarPosition = useUIStore((state) => state.uiState.sidebarPosition);
  const isLeft = sidebarPosition === 'left';

  return (
    <div className="h-screen flex flex-col bg-background text-foreground">
      <TitleBar />

      <div className="flex-1 flex overflow-hidden">
        {isLeft && <Sidebar />}

        <main className="flex-1 overflow-auto">
          {children}
        </main>

        {!isLeft && <Sidebar />}
      </div>

      <StatusBar />
    </div>
  );
}
```

#### Sidebar.tsx

**File**: `frontend/src/components/layout/Sidebar.tsx`

**Purpose**: Vertical navigation sidebar with conditional item visibility based on server status.

```typescript
// frontend/src/components/layout/Sidebar.tsx
import { Home, HelpCircle, Network, Database, MessageSquare, Settings } from 'lucide-react';
import { cn } from '@/lib/utils';
import { useUIStore } from '@/stores/useUIStore';
import { useProxyStore } from '@/stores/useProxyStore';
import { isElectron } from '@/utils/platform';

interface NavItem {
  id: string;
  icon: React.ComponentType<{ className?: string }>;
  label: string;
  route: string;
  requiresServer?: boolean;
}

const mainNavItems: NavItem[] = [
  { id: 'home', icon: Home, label: 'Home', route: '/', requiresServer: true },
  { id: 'providers', icon: Network, label: 'Providers', route: '/providers', requiresServer: true },
  { id: 'models', icon: Database, label: 'Models', route: '/models', requiresServer: true },
  { id: 'chat', icon: MessageSquare, label: 'Chat', route: '/chat', requiresServer: true },
];

const guideNavItems: NavItem[] = [
  { id: 'guide-browser', icon: HelpCircle, label: 'Browser Guide', route: '/browser-guide' },
  { id: 'guide-desktop', icon: HelpCircle, label: 'Desktop Guide', route: '/desktop-guide' },
];

export function Sidebar() {
  const sidebarPosition = useUIStore((state) => state.uiState.sidebarPosition);
  const activeRoute = useUIStore((state) => state.currentRoute);
  const setCurrentRoute = useUIStore((state) => state.setCurrentRoute);
  const connected = useProxyStore((state) => state.connected);
  const wsProxyStatus = useProxyStore((state) => state.wsProxyStatus);

  // Different buttons have different requirements:
  // - Home: Requires API server only
  // - Everything else: Requires API server AND proxy running
  const proxyRunning = wsProxyStatus?.providerRouter?.running || false;

  const activeGuideItem = guideNavItems.find(item => {
    if (isElectron()) {
      return item.id === 'guide-desktop';
    } else {
      return item.id === 'guide-browser';
    }
  });

  const isSettingsActive = activeRoute === '/settings';

  const getIndicatorClass = () => {
    return cn(
      'sidebar-nav-indicator',
      sidebarPosition === 'left' ? 'sidebar-nav-indicator-left' : 'sidebar-nav-indicator-right'
    );
  };

  return (
    <div className={cn(
      'sidebar sidebar-collapsed',
      sidebarPosition === 'left' ? 'border-r' : 'border-l'
    )}>
      <div className="sidebar-nav-container">
        {mainNavItems
          .filter(item => {
            if (!item.requiresServer) return true; // Always show if no server requirement
            if (!connected) return false; // Hide all server items if API offline
            if (item.id === 'home') return true; // Home only needs API server
            return proxyRunning; // Everything else needs proxy running
          })
          .map((item) => {
            const Icon = item.icon;
            const isActive = activeRoute === item.route;

            return (
              <button
                key={item.id}
                onClick={() => setCurrentRoute(item.route)}
                title={item.label}
                className={cn(
                  'sidebar-nav-button',
                  isActive ? 'sidebar-nav-button-active' : 'sidebar-nav-button-inactive'
                )}
              >
                {isActive && <div className={getIndicatorClass()} />}
                <Icon className="sidebar-icon h-6 w-6" />
              </button>
            );
          })}

        {activeGuideItem && (
          <button
            onClick={() => setCurrentRoute(activeGuideItem.route)}
            title={activeGuideItem.label}
            className={cn(
              'sidebar-guide-button',
              activeRoute === activeGuideItem.route
                ? 'sidebar-nav-button-active'
                : 'sidebar-nav-button-inactive'
            )}
          >
            {activeRoute === activeGuideItem.route && <div className={getIndicatorClass()} />}
            <activeGuideItem.icon className="sidebar-icon h-6 w-6" />
          </button>
        )}

        <button
          onClick={() => setCurrentRoute('/settings')}
          title="Settings"
          className={cn(
            'sidebar-settings-button',
            isSettingsActive
              ? 'sidebar-nav-button-active'
              : 'sidebar-nav-button-inactive'
          )}
        >
          {isSettingsActive && <div className={getIndicatorClass()} />}
          <Settings className="sidebar-icon h-6 w-6" />
        </button>
      </div>
    </div>
  );
}
```

#### TitleBar.tsx

**File**: `frontend/src/components/layout/TitleBar.tsx`

**Purpose**: Application title bar with theme toggle, sidebar position control, and window controls (Electron only).

```typescript
// frontend/src/components/layout/TitleBar.tsx
import { Moon, Sun, PanelLeft, PanelRight } from 'lucide-react';
import { VscChromeMinimize, VscChromeMaximize, VscChromeClose } from 'react-icons/vsc';
import { useUIStore } from '@/stores/useUIStore';

export function TitleBar() {
  const theme = useUIStore((state) => state.uiState.theme);
  const sidebarPosition = useUIStore((state) => state.uiState.sidebarPosition);
  const toggleTheme = useUIStore((state) => state.toggleTheme);
  const toggleSidebarPosition = useUIStore((state) => state.toggleSidebarPosition);

  const handleMinimize = () => {
    if (window.electronAPI) {
      window.electronAPI.window.minimize();
    }
  };

  const handleMaximize = () => {
    if (window.electronAPI) {
      window.electronAPI.window.maximize();
    }
  };

  const handleClose = () => {
    if (window.electronAPI) {
      window.electronAPI.window.close();
    }
  };

  return (
    <div
      className="titlebar"
      style={{ WebkitAppRegion: 'drag' } as React.CSSProperties}
    >
      <div className="titlebar-left">
        <span className="titlebar-title">Qwen Proxy</span>
      </div>

      <div className="titlebar-right" style={{ WebkitAppRegion: 'no-drag' } as React.CSSProperties}>
        <button
          className="titlebar-button"
          onClick={toggleSidebarPosition}
          title={sidebarPosition === 'left' ? 'Move sidebar to right' : 'Move sidebar to left'}
        >
          {sidebarPosition === 'left' ? (
            <PanelRight className="titlebar-button-icon" />
          ) : (
            <PanelLeft className="titlebar-button-icon" />
          )}
        </button>

        <button
          className="titlebar-button"
          onClick={toggleTheme}
          title={theme === 'light' ? 'Switch to dark mode' : 'Switch to light mode'}
        >
          {theme === 'light' ? (
            <Moon className="titlebar-button-icon" />
          ) : (
            <Sun className="titlebar-button-icon" />
          )}
        </button>

        <button
          className="titlebar-button"
          onClick={handleMinimize}
          title="Minimize window"
        >
          <VscChromeMinimize className="titlebar-button-icon" />
        </button>

        <button
          className="titlebar-button"
          onClick={handleMaximize}
          title="Maximize window"
        >
          <VscChromeMaximize className="titlebar-button-icon" />
        </button>

        <button
          className="titlebar-button-close"
          onClick={handleClose}
          title="Close window"
        >
          <VscChromeClose className="titlebar-button-icon" />
        </button>
      </div>
    </div>
  );
}
```

#### StatusBar.tsx

**File**: `frontend/src/components/layout/StatusBar.tsx`

**Purpose**: Bottom status bar displaying environment, API server status, extension status, credentials, provider, model, and lifecycle messages.

```typescript
// frontend/src/components/layout/StatusBar.tsx
import { useProxyStore } from '@/stores/useProxyStore';
import { useLifecycleStore } from '@/stores/useLifecycleStore';
import { useSettingsStore } from '@/stores/useSettingsStore';
import { useUIStore } from '@/stores/useUIStore';
import { EnvironmentBadge } from '@/components/ui/environment-badge';
import { StatusBadge } from '@/components/ui/status-badge';
import { Badge } from '@/components/ui/badge';

export function StatusBar() {
  const proxyStatus = useProxyStore((state) => state.status);
  const wsProxyStatus = useProxyStore((state) => state.wsProxyStatus);
  const connected = useProxyStore((state) => state.connected);
  const lifecycleState = useLifecycleStore((state) => state.state);
  const lifecycleMessage = useLifecycleStore((state) => state.message);
  const lifecycleError = useLifecycleStore((state) => state.error);
  const settings = useSettingsStore((state) => state.settings);
  const showStatusMessages = useUIStore((state) => state.uiState.showStatusMessages);

  const apiServerStatus = connected ? 'running' : 'stopped';

  const credentialStatus = proxyStatus?.credentials?.valid
    ? 'authenticated'
    : proxyStatus?.credentials
    ? 'invalid'
    : 'none';

  const extensionStatus = wsProxyStatus?.extensionConnected ? 'running' : 'stopped';

  const isProxyRunning = proxyStatus?.providerRouter?.running || false;
  const activeProvider = settings.active_provider as string || '';
  const activeModel = settings.active_model as string || '';

  const displayMessage = lifecycleError || lifecycleMessage;
  const isError = !!lifecycleError;
  const isTransitioning = lifecycleState === 'starting' || lifecycleState === 'stopping';

  return (
    <div className="statusbar">
      <div className="statusbar-left">
        {showStatusMessages && (
          <>
            <EnvironmentBadge />
            <div className="statusbar-separator" />
            <StatusBadge status={apiServerStatus}>API Server</StatusBadge>
            <div className="statusbar-separator" />
            <StatusBadge status={extensionStatus}>Extension</StatusBadge>
            <div className="statusbar-separator" />
            <StatusBadge status={credentialStatus} />
            {activeProvider && (
              <>
                <div className="statusbar-separator" />
                <Badge variant="secondary" className="flex-shrink-0 min-w-0" style={{
                  height: 'clamp(0.875rem, 2vw, 1rem)',
                  paddingLeft: 'clamp(0.25rem, 0.5vw, 0.375rem)',
                  paddingRight: 'clamp(0.25rem, 0.5vw, 0.375rem)',
                  fontSize: 'inherit'
                }}>
                  <span className="whitespace-nowrap">{activeProvider}</span>
                </Badge>
              </>
            )}
            {activeModel && (
              <>
                <div className="statusbar-separator" />
                <Badge variant="secondary" className="flex-shrink-0 min-w-0" style={{
                  height: 'clamp(0.875rem, 2vw, 1rem)',
                  paddingLeft: 'clamp(0.25rem, 0.5vw, 0.375rem)',
                  paddingRight: 'clamp(0.25rem, 0.5vw, 0.375rem)',
                  fontSize: 'inherit'
                }}>
                  <span className="whitespace-nowrap">{activeModel}</span>
                </Badge>
              </>
            )}
          </>
        )}
      </div>
      {showStatusMessages && displayMessage && (
        <StatusBadge status={isError ? 'invalid' : isProxyRunning ? 'running' : 'stopped'}>
          {isTransitioning && (
            <svg
              className="animate-spin -ml-1 mr-2 h-3 w-3 inline-block"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                className="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                strokeWidth="4"
              ></circle>
              <path
                className="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
          )}
          {displayMessage}
        </StatusBadge>
      )}
    </div>
  );
}
```

---

## Summary

This document provides complete source code for **Phases 8-10** of the Frontend V3 Rewrite Implementation Plan:

- **Phase 8**: 19 shadcn/ui base components + 7 custom UI components
- **Phase 9**: 21 feature-specific components organized by domain
- **Phase 10**: 4 layout components providing application structure

### Key Architectural Patterns

1. **Component Composition**: Complex features are built by composing smaller, focused components
2. **Single Responsibility**: Each component handles one specific aspect of the UI
3. **Type Safety**: All components use TypeScript with proper prop types
4. **Separation of Concerns**: Layout, UI, and feature components are clearly separated
5. **Reusability**: Base UI components are reused throughout feature components
6. **State Management**: Components receive state and handlers via props, keeping them stateless

### Integration Points

- All components import from `@/components/ui/` for base UI elements
- Feature components use domain services from `@/services/`
- Layout components integrate with Zustand stores from `@/stores/`
- Custom hooks from `@/hooks/` provide business logic
- Type definitions from `@/types/` ensure type safety

### Next Steps

After implementing Phases 8-10, proceed to:
- **Phase 11**: Pages (compose these components into full pages)
- **Phase 12**: Application Entry & Routing
- **Phase 13**: Styling System (CSS for all components)

For complete context, refer to:
- **01_FRONTEND_V3_REWRITE_IMPLEMENTATION_PLAN.md**: Overall architecture and phase details
- **03_CODE_EXAMPLES.md**: Examples of foundation layers (types, utils, services, stores, hooks)

---

**Document Version**: 1.0
**Date**: November 8, 2025
**Coverage**: Phases 8, 9, and 10 - Complete source code for all UI components
